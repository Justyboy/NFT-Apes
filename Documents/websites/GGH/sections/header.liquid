<style>
.site-header__logo img { width: {{ section.settings.logo_max_width | append:'px' }} };
</style>

{%- assign header_position = section.settings.header_position -%}
{%- assign color_header_bg_home = settings.color_header_bg_home -%}
{%- assign color_header_home = settings.color_header_home | color_to_hex -%}

{%- if color_header_bg_home == "rgba(0,0,0,0)" and color_header_home == "#ffffff" and header_position == 'relative' -%}
  {%- assign colorFix = "color-fix" -%}
{%- endif -%}

{%- include 'nav-drawer' -%}
{%- include 'cart-drawer' -%}

{% if section.settings.show_announcement_bar  %}
        <div class="top-bar wrapper" style="background:{{ section.settings.color_announcement_bar_bg }};">
          <div class="top-bar__slider">
          <div class="top-bar__slide" style="color: {{ section.settings.color_announcement_bar_text }};">
              {% if section.settings.announcement_link != blank %}
                <a href="{{ section.settings.announcement_link }}" >
                  {{ section.settings.announcement_text | strip_html }}
                </a>
              {% else %}
                {{ section.settings.announcement_text | strip_html }}
              {% endif %}
            </div>
          </div>
        </div>
      {% endif %}

<header class="site-header {{ header_position }} {{ colorFix }}" role="banner" data-section-id="{{ section.id }}" data-section-type="header" data-position="{{ header_position }}" data-nav-position="{{ section.settings.menu_position }}" data-bg="{{ color_header_bg_home }}" data-color="{{ color_header_home }}">
  
  
  <div class="site-header__container is-moved-by-drawer">
      
    <div class="wrapper">
  		<div class="grid--full grid--table">
          <div id="hide_logo">
 		{% include 'site-logo' %}
          </div>
  		{% include 'site-nav' %}
  		</div>
  	</div>
    <div class="space-maker"></div>

    {% if section.settings.show_search %}
      {% include 'nav-search' %}
    {% endif %}
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "class": "header-wrapper",
  "settings": [
    {
      "type": "select",
      "id": "header_position",
      "label": "Position",
      "default": "fixed",
      "options": [
        {
          "value": "fixed",
          "label": "Stick to top on scroll"
        },
        {
          "value": "relative",
          "label": "Hide on scroll"
        }
      ]
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Custom logo (Transparent header)",
      "info": "Used on Home and Collection pages when the header is transparent"
    },
    {
      "type": "image_picker",
      "id": "logo_not_home",
      "label": "Custom logo (Default)",
      "info": "Used on the other pages and on scroll when the header is sticky"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "label": "Custom logo width (in pixels)",
      "min": 30,
      "max": 250,
      "default": 100,
      "step":10,
      "unit":"px"
    },
    {
      "type": "checkbox",
      "id": "show_shop_name",
      "label": "Show shop name"
    },
    {
      "type": "header",
      "content": "Search"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search",
      "default": true
    },
    {
      "type": "link_list",
      "id": "menu_searches_list",
      "label": "Search menu",
      "info": "This menu won't show dropdown items"
    },
    {
      "type": "checkbox",
      "id": "show_search_links",
      "label": "Show collection links",
      "default": true
    },
    {
      "type": "header",
      "content": "Menu"
    },
    {
      "type": "link_list",
      "id": "main-menu",
      "label": "Link list",
      "default": "main-menu"
    },
    {
      "type": "select",
      "id": "menu_position",
      "label": "Position",
      "default": "right",
      "options": [
        { "label": "Right", "value": "right" },
        { "label": "Center", "value": "center" }
      ]
    },
    {
      "type": "range",
      "id": "image_aspect_ratio",
      "label": "Image aspect ratio",
      "info": "Affects mega menu and dropdown images",
      "min": 0.5,
      "max": 1.5,
      "step": 0.1,
      "unit": ":1",
      "default": 1
    },
	{
      "type": "textarea",
      "id": "announcement_text",
      "label": "Announcement Text",
      "default": "Announce something here"      
    },
    {
      "type": "url",
      "id": "announcement_link",
      "label": "Announcement Link"
    },
	{
      "type":"checkbox",
      "id":"show_announcement_bar",
      "label":"Show announcement bar"
    },
    {
      "type": "color",
      "id": "color_announcement_bar_bg",
      "label": "Background",
      "default": "#fafafa"
    },
    {
      "type": "color",
      "id": "color_announcement_bar_text",
      "label": "Text",
      "default": "#333"
    }
  ],
  "blocks": [
    {
      "name": "Mega menu",
      "type": "megamenu",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Submenu item",
          "info": "This submenu will appear as a megamenu."
        },
        {
          "type": "select",
          "id": "images_position",
          "label": "Images position",
          "default": "left",
          "options": [
            { "label": "Left", "value": "left" },
            { "label": "Right", "value": "right"},
            { "label": "Stacked", "value": "stacked"}
          ]
        },
        {
          "type": "header",
          "content": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image",
          "info": "Recommended size: 500 x 800 px"
        },
        {
          "type": "text",
          "id": "title_1",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "link_1",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image",
          "info": "Recommended size: 500 x 800 px"
        },
        {
          "type": "text",
          "id": "title_2",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "link_2",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image",
          "info": "Recommended size: 500 x 800 px"
        },
        {
          "type": "text",
          "id": "title_3",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "link_3",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Image 4"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image",
          "info": "Recommended size: 500 x 800 px"
        },
        {
          "type": "text",
          "id": "title_4",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "link_4",
          "label": "Link"
        }
      ]
    },
    {
      "name": "Dropdown image",
      "type": "dropdown_image",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Submenu item",
          "info": "This submenu will appear as a dropdown with links and image."
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "Recommended size: 500 x 800 px"
        },
        {
          "type": "select",
          "id": "image_position",
          "label": "Image position",
          "default": "left",
          "options": [
            { "label": "Left", "value": "left" },
            { "label": "Right", "value": "right"}
          ]
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
	{
      "name": "Custom Item",
      "type": "custom_item",
      "settings": [
        {
          "type": "text",
          "id": "parent",
          "label": "Parent Item"
        },
		{
          "type": "text",
          "id": "child",
          "label": "Child Item"
        },
		{
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    }
  ]
}
{% endschema %}