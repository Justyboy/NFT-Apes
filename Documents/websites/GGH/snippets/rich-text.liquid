<!-- Rich text -->

{%- capture content -%}
	{%- if logo != blank -%}
		<div class="rich-text__logo">
			{%- assign image_widths = '295,394,590,700,800,1000,1200,1500,1800,2000,2400' -%}
			{%- include 'theme-rias', image: logo -%}
			<img class="lazyload"
				 src="{{ 'blank.gif' | asset_img_url: '1x1' }}"
				 data-src="{{ image_url_pattern }}"
				 data-widths= "[{{ image_widths }}]"
				 data-aspectratio="{{image.aspect_ratio }}"
				 data-sizes="auto"
				 alt="{{ logo.alt | escape }}">
			<noscript>
				<img src="{{ logo | img_url: '100x100' }}" alt="{{ logo.alt | escape }}">
			</noscript>
		</div>
	{%- endif -%}
	{%- if subheading != blank -%}
		<div class="rich-text__subheading">{{subheading}}</div>
	{%- endif -%}
	{%- if heading != blank -%}
		<h3 class="rich-text__heading{% if heading_font_size %} size--{{ heading_font_size }}{% endif %}">{{ heading }}</h3>
	{%- endif -%}
	{%- if text != blank -%}
		<div class="rich-text__text{% if text_font_size %} size--{{ text_font_size }}{% endif %}">{{ text }}</div>
	{%- endif -%}
	{%- if button_text != blank or secondary_button_text != blank -%}
		<div class="rich-text__buttons">
			{%- if button_text != blank -%}
				<a class="btn btn--{{ button_style }}" href="{{ button_url }}">{{ button_text }}</a>
			{%- endif -%}
			{%- if secondary_button_text != blank -%}
				<a class="btn btn--{{ secondary_button_style }}" href="{{ secondary_button_url }}">{{ secondary_button_text }}</a>
			{%- endif -%}
		</div>
	{%- endif -%}
{%- endcapture -%}

{%- capture video_link -%}
	{%- unless video_url == blank -%}
		{%- if video_url.type == 'youtube' -%}
			{%- assign video_url = 'https://www.youtube.com/watch?v=' | append: video_url.id  -%}
		{%- elsif video_url.type == 'vimeo' -%}
			{%- assign video_url = 'https://vimeo.com/' | append: video_url.id  -%}
		{%- endif -%}

		<div class="rich-text__video-link">
			<a class="play-button animated" href="{{ video_url }}" data-play-button>
				<span class="filled-circle"></span>
				<span class="stroke-circle"></span>
				<span class="triangle custom-icon-triangle"></span>
			</a>
		</div>
	{%- endunless -%}
{%- endcapture -%}

{%- if show_image -%}
	{%- if image_background -%}
		<div class="rich-text__background">
			{%- unless image == blank -%}
				<div class="rich-text__background-image lazyload"
					data-bgset="{% include 'bgset', image: image %}"
					data-parent-fit="cover"
					data-sizes="auto">
				</div>
				<noscript>
					<div class="rich-text__background-image no-js-image" style="background-image: url({{ image | img_url: '2048x' }});"></div>
				</noscript>
			{%- else -%}
				<div class="rich-text__background-image svg-placeholder placeholder-svg--overlayed">
					{{- 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg-filled' -}}
				</div>
			{%- endunless -%}
		</div>
	{%- endif -%}

	<div class="wrapper">
		<div class="grid--full">
			<div class="grid__item">
				<div class="rich-text__wrapper {% if text_position == 'right' %}rich-text__wrapper--reversed{% endif %}{% if content == blank %} rich-text__wrapper--no-content{% endif %}{% if video_url == blank %} rich-text__wrapper--no-video{% endif %}">

					{%- unless image_background -%}
						<div class="rich-text__image">
							{%- unless image == blank -%}
								<div class="rich-text__image-bg lazyload"
										data-bgset="{% include 'bgset', image: image %}"
										data-aspectratio="{{ image.aspect_ratio }}"
										data-sizes="auto">
								</div>
								<noscript>
									<div class="rich-text__image-bg no-js-image" style="background-image: url({{ image | img_url: '2048x' }});"></div>
								</noscript>
							{%- else -%}
								<div class="rich-text__image-bg rich-text__image-bg--placeholder placeholder-svg--overlayed">
									{{- 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg-filled' -}}
								</div>
							{%- endunless -%}
						</div>
					{%- endunless -%}

					{%- unless content == blank -%}
						<div class="rich-text__content">
							{{- content -}}
						</div>
					{%- endunless -%}

					{{- video_link -}}
				</div>
			</div>
		</div>
	</div>
{%- else -%}
	<div class="rich-text rich-text--{{ section_id }} rich-text--no-image">
		<div class="wrapper wrapper--small text-{{ text_position }}">
			<div class="rich-text__container">
				{{- content -}}
			</div>
		</div>
	</div>
{%- endif -%}